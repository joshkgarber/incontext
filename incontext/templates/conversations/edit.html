{% extends "base.html" %}

{% block header %}
	<h1>{% block title %}Edit Conversation "{{ conversation["name"] }}"{% endblock %}</h1>
{% endblock %}
	
{% block main %}
	<form method="post">
		<label for="name">Name
			<input id="name" name="name" value="{{ request.form["name"] or conversation["name"] }}" required>
		</label>
		<label for="agent">Agent
			<select name="agent_id" id="agent" required>
				{% for agent in agents %}
				<option value="{{ agent["id"] }}">{{ agent["name"] }}</option>
				{% endfor %}
			</select>
		</label>
		<input type="submit" value="Save">
	</form>
	<hr>
	<form method="post" action="{{ url_for("conversations.delete", conversation_id=conversation["id"]) }}">
		<input type="submit" value="Delete">
	</form>
	<script>
		const opts = document.querySelectorAll('#agent option');
		opts.forEach((opt) => { if (opt.value === "{{ request.form['agent'] or conversation['agent_id'] }}") opt.selected = true;});
	</script>
{% endblock %}

